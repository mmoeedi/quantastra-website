<html lang="en" class="scroll-smooth"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantastra | Aviation Intelligence</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.iconify.design/3/3.1.0/iconify.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&amp;display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #030303;
            color: #e4e4e7;
            background-image: 
                radial-gradient(at 0% 0%, rgba(255,255,255,0.03) 0px, transparent 50%),
                radial-gradient(at 100% 0%, rgba(255,255,255,0.03) 0px, transparent 50%);
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .text-glow {
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
        }

        /* Fade in animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        zinc: {
                            850: '#1f1f22',
                            950: '#0a0a0a', 
                        }
                    },
                    letterSpacing: {
                        tighter: '-0.04em',
                        tight: '-0.02em',
                    }
                },
            },
        }
    </script>
</head>
<body class="antialiased selection:bg-white/20 selection:text-white min-h-screen flex flex-col justify-between">

    <!-- Navigation -->
    <header class="fixed top-0 w-full z-50 border-b border-white/5 bg-[#030303]/80 backdrop-blur-md transition-all duration-300">
        <nav class="max-w-6xl mx-auto px-6 h-16 flex justify-between items-center">
            <!-- Brand -->
            <a href="#" class="flex items-center gap-2 group">
                <div class="w-6 h-6 bg-white text-black flex items-center justify-center rounded-[4px] text-xs font-bold tracking-tighter">Q</div>
                <span class="text-sm font-semibold tracking-tight text-white group-hover:opacity-80 transition-opacity">QUANTASTRA</span>
            </a>
            
            <!-- Menu -->
            <div class="hidden md:flex items-center gap-8">
                <a href="index.html" class="text-xs font-medium text-zinc-400 hover:text-white transition-colors">Home</a>
                <a href="weather.html" class="text-xs font-medium text-white flex items-center gap-1.5 bg-white/5 px-3 py-1.5 rounded-full border border-white/10">
                    <span class="relative flex h-1.5 w-1.5">
                      <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"></span>
                      <span class="relative inline-flex rounded-full h-1.5 w-1.5 bg-emerald-500"></span>
                    </span>
                    Live Weather
                </a>
                <a href="about.html" class="text-xs font-medium text-zinc-400 hover:text-white transition-colors">About</a>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="flex-grow pt-32 pb-20 px-6">
        <div class="max-w-6xl mx-auto">

            <!-- Hero Section -->
            <section class="text-center mb-20 animate-fade-in">
                <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full border border-white/10 bg-white/[0.02] mb-8">
                    <span class="iconify text-zinc-400" data-icon="lucide:radar" data-width="12"></span>
                    <span class="text-[10px] font-medium tracking-wide text-zinc-400 uppercase">System Operational</span>
                </div>
                
                <h1 class="text-5xl md:text-7xl font-medium text-white tracking-tighter mb-6 text-glow">
                    Insights from <br class="hidden md:block">
                    <span class="text-transparent bg-clip-text bg-gradient-to-b from-zinc-200 to-zinc-600">the Stratosphere.</span>
                </h1>
                <p class="text-base md:text-lg text-zinc-500 font-light max-w-lg mx-auto leading-relaxed">
                    Real-time telemetry and global air traffic analysis powered by The OpenSky Network.
                </p>
            </section>

            <!-- Live Stats Grid -->
            <section class="mb-24">
                <div class="flex items-center justify-between mb-8 px-2">
                    <h2 class="text-sm font-medium text-white tracking-tight flex items-center gap-2">
                        <span class="iconify" data-icon="lucide:activity" data-width="16"></span>
                        Live Global Metrics
                    </h2>
                    <span id="data-source-label" class="text-[10px] text-zinc-600 uppercase tracking-widest font-medium">Live Feed</span>
                </div>
                
                <div class="grid md:grid-cols-2 gap-6">
                    
                    <!-- Card 1: Airborne -->
                    <div class="glass-card rounded-xl p-8 relative overflow-hidden group hover:bg-white/[0.04] transition-colors duration-500">
                        <div class="absolute top-0 right-0 p-8 opacity-20 group-hover:opacity-40 transition-opacity">
                            <span class="iconify text-white" data-icon="lucide:plane" data-width="64" stroke-width="1"></span>
                        </div>
                        <div class="relative z-10">
                            <div class="text-xs font-medium text-zinc-500 uppercase tracking-widest mb-1">Active Traffic</div>
                            <div class="text-sm text-zinc-400 mb-8">Total flights currently airborne</div>
                            
                            <div class="flex items-baseline gap-2">
                                <div id="flights-count" class="text-6xl md:text-7xl font-semibold text-white tracking-tighter">
                                    <span class="text-2xl text-zinc-600 animate-pulse">---</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Card 2: Featured Flight -->
                    <div class="glass-card rounded-xl p-8 relative overflow-hidden group hover:bg-white/[0.04] transition-colors duration-500">
                        <div class="absolute top-0 right-0 p-8 opacity-20 group-hover:opacity-40 transition-opacity">
                            <span class="iconify text-white" data-icon="lucide:scan-eye" data-width="64" stroke-width="1"></span>
                        </div>
                        <div class="relative z-10">
                            <div class="text-xs font-medium text-zinc-500 uppercase tracking-widest mb-1">Spotlight</div>
                            <div class="text-sm text-zinc-400 mb-8">Randomly selected active vessel</div>
                            
                            <div id="featured-flight" class="text-6xl md:text-7xl font-semibold text-white tracking-tighter truncate">
                                <span class="text-2xl text-zinc-600 animate-pulse">---</span>
                            </div>
                            <div class="flex items-center gap-2 mt-4 text-zinc-400">
                                <span class="iconify" data-icon="lucide:map-pin" data-width="14"></span>
                                <p id="featured-flight-origin" class="text-xs font-medium tracking-wide">Initializing scan...</p>
                            </div>
                        </div>
                    </div>

                </div>
            </section>

            <!-- Intelligence / Blog Placeholder -->
            <section class="border-t border-white/5 pt-20">
                <div class="flex flex-col md:flex-row justify-between items-end mb-12 gap-6">
                    <div>
                        <h2 class="text-2xl font-medium text-white tracking-tight mb-2">Intelligence Stream</h2>
                        <p class="text-sm text-zinc-500">Blog Section Coming Soon...</p>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <!-- Footer -->
    <footer class="border-t border-white/5 bg-[#030303] py-12">
        <div class="max-w-6xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-6">
            <div class="flex items-center gap-2">
                <div class="w-4 h-4 bg-zinc-800 rounded-full"></div>
                <p class="text-[10px] text-zinc-500 uppercase tracking-wider">Â© 2025 Quantastra Systems.</p>
            </div>
            
            <div class="flex items-center gap-6">
                <a href="#" class="text-zinc-600 hover:text-white transition-colors"><span class="iconify" data-icon="lucide:github" data-width="16"></span></a>
                <a href="#" class="text-zinc-600 hover:text-white transition-colors"><span class="iconify" data-icon="lucide:twitter" data-width="16"></span></a>
                <div class="h-4 w-px bg-white/10"></div>
                <span class="text-[10px] text-zinc-600">Data: OpenSky Network</span>
            </div>
        </div>
    </footer>

    <!-- Logic -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            fetchFlightData();
        });

        async function fetchFlightData() {
            const flightCountElement = document.getElementById('flights-count');
            const featuredFlightElement = document.getElementById('featured-flight');
            const featuredFlightOriginElement = document.getElementById('featured-flight-origin');
            const dataSourceLabel = document.getElementById('data-source-label');

            const apiUrl = 'https://opensky-network.org/api/states/all';

            const username = ''; // Add credentials if available
            const password = ''; 
            
            const headers = new Headers();
            if (username && password) {
                headers.set('Authorization', 'Basic ' + btoa(username + ":" + password));
            }

            try {
                const response = await fetch(apiUrl, { headers: headers });

                // Handle Rate Limiting
                if (response.status === 429 || response.status === 403 || response.status === 504) {
                    console.warn("API limit reached or timeout. Switching to simulation.");
                    loadDemoData(flightCountElement, featuredFlightElement, featuredFlightOriginElement, dataSourceLabel);
                    return; 
                }

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();

                // Animate Numbers
                const flightCount = data.states ? data.states.length : 0;
                animateValue(flightCountElement, 0, flightCount, 1500);

                if (flightCount > 0) {
                    // Pick a random flight
                    let randomFlight = null;
                    let attempts = 0;
                    
                    // Try to find a flight with a callsign
                    while (!randomFlight && attempts < 50) {
                        const randomIndex = Math.floor(Math.random() * data.states.length);
                        const flight = data.states[randomIndex];
                        if (flight && flight[1] && flight[2]) {
                            randomFlight = flight;
                        }
                        attempts++;
                    }

                    if (randomFlight) {
                        const callsign = randomFlight[1].trim() || "N/A"; 
                        const originCountry = randomFlight[2];
                        featuredFlightElement.innerText = callsign;
                        featuredFlightOriginElement.innerText = `Origin: ${originCountry}`;
                    } else {
                        featuredFlightElement.innerText = "Scanning...";
                        featuredFlightOriginElement.innerText = "Target acquisition pending";
                    }
                } else {
                    featuredFlightElement.innerText = "Silent";
                    featuredFlightOriginElement.innerText = "No activity detected";
                }

            } catch (error) {
                console.error("Fetch error, switching to simulation:", error);
                loadDemoData(flightCountElement, featuredFlightElement, featuredFlightOriginElement, dataSourceLabel);
            }
        }

        function loadDemoData(countEl, flightEl, originEl, sourceEl) {
            // Realistic simulation
            const randomCount = Math.floor(Math.random() * (16000 - 8000 + 1) + 8000);
            
            const demoFlights = [
                { callsign: "UAE202", origin: "United Arab Emirates" },
                { callsign: "DLH454", origin: "Germany" },
                { callsign: "BAW117", origin: "United Kingdom" },
                { callsign: "QFA10", origin: "Australia" },
                { callsign: "JAL5", origin: "Japan" },
                { callsign: "AFR66", origin: "France" },
                { callsign: "UAL1", origin: "United States" },
                { callsign: "KLM89", origin: "Netherlands" }
            ];
            const randomFlight = demoFlights[Math.floor(Math.random() * demoFlights.length)];

            animateValue(countEl, 0, randomCount, 2000);
            flightEl.innerText = randomFlight.callsign;
            originEl.innerText = `Origin: ${randomFlight.origin}`;
            
            if (sourceEl) {
                sourceEl.innerHTML = '<span class="flex items-center gap-1 text-amber-500"><span class="iconify" data-icon="lucide:alert-circle" data-width="10"></span> Simulated Feed</span>';
            }
        }

        function animateValue(obj, start, end, duration) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                obj.innerHTML = Math.floor(progress * (end - start) + start).toLocaleString();
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }
    </script>

</body></html>